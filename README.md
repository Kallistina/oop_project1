OMAΔIKO PROJECT

Ονοματεπώνυμο:  Ευαγγελία Γούλα  sdi2000040
                Καλλιόπη - Χριστίνα Δεσποτίδου sdi2000045

compile:

     g++ -o run my_main.cpp MODULES/vehicle.cpp MODULES/toll.cpp MODULES/entrance.cpp MODULES/segment.cpp MODULES/attica.cpp                

Καλησπέρα! Θα προσπαθήσουμε να εξηγήσουμε πώς ακριβώς υλοποιήσαμε την Εργασία του μαθήματος για γίνει όλος ο κώδικας κατανοητός. :)

Ας ξεκινήσουμε από τη main...

                                        ---my_main---
--->Η main δέχεται από τη γραμμή εντολών τον αριθμό των κύκλων προσομοίωσης, τον αριθμό των τμημάτων την Αττικής οδού, τον μέγιστο αριθμό οχημάτων που μπορούν να εισέλθουν σε ένα τμήμα του 
αυτοκινητοδρόμου από κάποιο διόδιο με εισπράκτορα και το ποσοστό των οχημάτων σ΄ ένα τμήμα που μεταβαίνει σε κατάσταση “ετοιμότητας” για έξοδο από το τμήμα στην επόμενη κατάσταση.

Στη συνέχεια δημιουργεί μια Attica και της περνάει τα κατάλληλα ορίσματα.
Καλείται επαναληπτικά η operate της Attica για Ν κύκλους προσομοίωσης.


                                        ---class vehicle---
--->Στην κλάση αυτή υπάρχουν 3 private members. Το exit_node είναι ο τελικός κόμβος, δηλαδή ο προορισμός του κάθε οχήματος. Το current_segment είναι το τμήμα που βρίσκεται το όχημα στον κάθε 
κύκλο προσομοίωσης. Το ready αντιπροσωπεύει την κατάσταση ετοιμότητας.

Στον constuctor μέσω της μεταβλητής exit περνάμε τον τελικό κόμβο κάθε οχήματος. Αρχικοποιούμε τον current_segment σε -1 και τον ready σε false. 
Στην set_current_segment με όρισμα i, ενημερώνουμε κάθε φορά το τμήμα στο οποίο βρίσκεται το όχημα. 
Η exit_attica επιστέφει αν είναι έτοιμο το όχημα να βγει από τον αυτοκινητόδρομο ανάλογα με το αν η συνθήκη exit_node==current_segment είναι αληθής ή οχι.
Στην set_exit_segment με όρισμα ready ενημερώνουμε την κατάσταση ετοιμότητας του οχήματος.
Η get_exit_segment επιστρέφει την κατάσταση ετοιμότητας του οχήματος.


                                        ---class toll---
--->Η κλάση αυτή έχει 3 protected members. Το πρώτο είναι μία queue με οχήματα, το δεύτερο ο αριθμός που έχουν κάθε στιγμή τα διόδια και το τρίτο είναι το speed, δηλαδή το Κ που αντιστοιχεί σε 
κάθε διόδιο.
Στον constuctor δημιουργείται ένας τυχαίος αριθμός οχημάτων. Σε κάθε όχημα περνάται τυχαίος αριθμός που αντιπροσωπεύει τον τελικό κόμβο και ύστερα το όχημα γίνεται push στην queue vehicles.
Η toll είναι υπερκλάση και έχει δύο υποκλάσεις, την employe_toll και την electronic_toll. 
Η μέθοδος get_num_of_vehicles επιστρέφει τον num_of_vehicles.
Η μέθοδος add αυξάνει τον αρθμό των οχημάτων του διοδίου κάνοντας push στην queue ένα όχημα και η sub αντίστοιχα τα αφαιρεί.
Η συνάρτηση get_vehicle επιστρέφει reference στο πρώτο όχημα της queue vehicles.
Η συνάρτηση get_speed επιστρέφει την ταχύτητα.
Η συνάρτηση get_speed είναι pure virlual καθώς η υλοποίησή της διαφέρει ανάλογα με το αν το διόδιο είναι με εισπράκτορα ή ηλεκτρονικό.


                                        ---class employe_toll και electronic_toll---
--->Κληρονομούν την κλάση toll. Οι constructor τους γίνονται μέσω του constructor της υπερκλάσης.
Η set_speed ενημερώνει την ταχύτητα με Κ στην employe_toll και με 2Κ στην electronic_toll.


                                        ---class entrance---
--->Η κλάση αυτή έχει 4 private members. Το πρώτο είναι ο αριθμός των διοδίων της εισόδου, το δεύτερο είναι δείκτης στην αρχική θέση του πίνακα tolls, το τρίτο είναι δείκτης στο segment της 
κάθε εισόδου και το τέταρο είναι ο αριθμός των οχημάτων.
Στον constructor δημιουργείται ένας τυχαίος αριθμός διοδίων με εισπράκτορα και ένας τυχαίος αριθμός ηλεκτρονικών διοδίων. Επίσης δημιουργείται ένας πίνακας με num_of_tolls διόδια.
Στη συνέχεια δημιουργούνται εναλλάξ διόδια με εισπράκτορα και ηλεκτρονικά διόδια.
Η μέθοδος get_num_of_vehicles επιστρέφει τον αριθμό των οχημάτων της εισόδου.
Η συνάρτηση set_node με όρισμα i περνάει το όνομα/ταυτότητα του κόμβου της εισόδου.
Η συνάρτηση get_node επιστρέφει το όνομα/ταυτότητα του κόμβου της εισόδου.
H συνάρτηση operate με ορίσματα το NSegs, το Κ και την χωρητικότητα του κάθε τμήματος. Η operate έχει αρχικα έναν counter για τα οχήματα που εισέρχονται στα διόδια (vehicles_to_enter_counter) 
και 2 μεταβλητές για το όριο των οχημάτων που δέχεται το κάθε διόδιο ανάλογα με το αν είναι με εισπράκτορα ή ηλεκτρονικό (employe_tolls_limit και electronic_tolls_limit αντίστοιχα).
Όσο (while) η χωρητικότητα είναι αρκετή και δεν έχει ξεπεραστεί το όριο και των δύο ειδών διοδίων, περνάνε οχήματα από τα διόδια.
Αυτό γίνεται επαναληπτικα (for loop), ελέγχοντας αν επαρκεί η χωρητικότητα, ανάλογα με το είδος του διοδίου, που το ξεχωρίζουμε από την ταχύτητά του (if(tolls[i]->get_speed() == K)). Αν δεν 
έχει ξεπεραστεί το όριο του διοδίου, περνάμε στον πίνακα του segment το όχημα που εισέρχεται. Μειώνουμε τη χωρητικότητα κατά ένα, αφαιρούμε το όχημα από το διόδιο, μειώνουμε το ότιο του 
διοδίου κατά ένα και αυξάνουμε τον vehicles_to_enter_counter. Στην περίπτωση που η χωρητικότητα δεν επαρκεί, διακόπτουμε την εισαγωγή των οχημάτων στο τμήμα (break).
